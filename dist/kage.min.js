/*! kage.js v0.3.0
 *  Licensed under GPL-3.0
 *  https://github.com/kurgm/kage-engine#readme
 */
var Kage=function(){"use strict";var t=function(){function t(){this.hash={}}return t.prototype.set=function(t,a){this.hash[t]=a},t.prototype.search=function(t){return this.hash[t]?this.hash[t]:""},t.prototype.push=function(t,a){this.set(t,a)},t}(),a=function(){function t(){this.array=[]}return t.prototype.clear=function(){this.array=[]},t.prototype.push=function(t){var a=200,e=0,r=200,n=0;if(!(t.length<3)){for(var i=0,o=t.array;i<o.length;i++){var s=o[i],h=s.x,u=s.y;if(h<a&&(a=h),h>e&&(e=h),u<r&&(r=u),u>n&&(n=u),isNaN(h)||isNaN(u))return}a!==e&&r!==n&&this.array.push(t)}},t.prototype.generateSVG=function(t){var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" viewBox="0 0 200 200" width="200" height="200">\n';return t?this.array.forEach((function(t){var e=t.array,r="L";a+='<path d="';for(var n=0;n<e.length;n++)0===n?a+="M ":e[n].off?(a+="Q ",r="Q"):"Q"!==r||e[n-1].off?"L"===r&&1===n&&(a+="L "):a+="L ",a+=e[n].x+","+e[n].y+" ";a+='Z" fill="black" />\n'})):(a+='<g fill="black">\n',a+=this.array.map((function(t){return'<polygon points="'+t.array.map((function(t){return t.x+","+t.y+" "})).join("")+'" />\n'})).join(""),a+="</g>\n"),a+="</svg>\n"},t.prototype.generateEPS=function(){var t="";return t+="%!PS-Adobe-3.0 EPSF-3.0\n%%BoundingBox: 0 -208 1024 816\n%%Pages: 0\n%%Title: Kanji glyph\n%%Creator: GlyphWiki powered by KAGE system\n%%CreationDate: "+(new Date).toString()+"\n%%EndComments\n%%EndProlog\n",this.array.forEach((function(a){for(var e=a.array,r=0;r<e.length;r++)t+=5*e[r].x+" "+(1e3-5*e[r].y-200)+" ",t+=0===r?"newpath\nmoveto\n":"lineto\n";t+="closepath\nfill\n"})),t+="%%EOF\n"},t}();function e(t,a,e,r,n){var i,o,s,h;return e<a+100?(i=r,s=r,o=a+100,h=t+100):(i=a+100,s=t+100,o=n,h=n),Math.floor((e-i)/(o-i)*(h-s)+s)}var r=function(){function t(t){this.a1=t[0],this.a2_100=t[1],this.a3_100=t[2],this.x1=t[3],this.y1=t[4],this.x2=t[5],this.y2=t[6],this.x3=t[7],this.y3=t[8],this.x4=t[9],this.y4=t[10],this.kirikuchiAdjustment=Math.floor(this.a2_100/100)%10,this.tateAdjustment=Math.floor(this.a2_100/1e3)%10,this.opt3=Math.floor(this.a2_100/1e4),this.a2_100%=100,this.haneAdjustment=this.urokoAdjustment=this.kakatoAdjustment=Math.floor(this.a3_100/100)%10,this.mageAdjustment=Math.floor(this.a3_100/1e3),this.a3_100%=100}return t.prototype.getControlSegments=function(){var t=[];switch(this.a1){case 0:case 8:case 9:break;case 6:case 7:t.unshift([this.x3,this.y3,this.x4,this.y4]);case 2:case 12:case 3:t.unshift([this.x2,this.y2,this.x3,this.y3]);default:t.unshift([this.x1,this.y1,this.x2,this.y2])}return t},t.prototype.stretch=function(t,a,r,n,i,o,s,h){this.x1=e(t,a,this.x1,i,o),this.y1=e(r,n,this.y1,s,h),this.x2=e(t,a,this.x2,i,o),this.y2=e(r,n,this.y2,s,h),99!==this.a1&&(this.x3=e(t,a,this.x3,i,o),this.y3=e(r,n,this.y3,s,h),this.x4=e(t,a,this.x4,i,o),this.y4=e(r,n,this.y4,s,h))},t.prototype.getBox=function(){var t=1/0,a=1/0,e=-1/0,r=-1/0;switch(this.a1){default:t=Math.min(t,this.x4),e=Math.max(e,this.x4),a=Math.min(a,this.y4),r=Math.max(r,this.y4);case 2:case 3:case 4:t=Math.min(t,this.x3),e=Math.max(e,this.x3),a=Math.min(a,this.y3),r=Math.max(r,this.y3);case 1:case 99:t=Math.min(t,this.x1,this.x2),e=Math.max(e,this.x1,this.x2),a=Math.min(a,this.y1,this.y2),r=Math.max(r,this.y1,this.y2);case 0:}return{minX:t,maxX:e,minY:a,maxY:r}},t}(),n=Math.hypot||function(t,a){return Math.sqrt(t*t+a*a)};function i(t,a){var e=t[0],r=t[1];if(void 0===a&&(a=1),0===e&&0===r)return[1/e==1/0?a:-a,0];var i=a/n(e,r);return[e*i,r*i]}function o(t,a,e,r){var n=1-r;return n*n*t+n*r*2*a+r*r*e}function s(t,a,e,r){return 2*(r*(t-2*a+e)-t+a)}function h(t,a,e,r,n){var i=1-n;return i*i*i*t+i*i*n*3*a+i*n*n*3*e+n*n*n*r}function u(t,a,e,r,n){return 3*(n*(n*(3*a-t-3*e+r)+2*(t-2*a+e))-t+a)}function f(t,a,e,r){for(void 0===r&&(r=1e-5);a+r<e;){var n=a+(e-a)/3,i=e-(e-a)/3;t(n)<t(i)?e=i:a=n}return a+(e-a)/2}function k(t,a){return void 0===a&&(a=1e8),Math.round(t*a)/a}function y(t,a,e,r){return t*r-e*a}function c(t,a,e,r,n,i,o,s){var h=y(e-t,r-a,o-n,s-i);if(isNaN(h))return!0;if(0===h)return!1;var u=y(e-t,r-a,n-t,i-a),f=y(e-t,r-a,o-t,s-a),c=y(o-n,s-i,t-n,a-i),x=y(o-n,s-i,e-n,r-i);return k(u*f,1e5)<=0&&k(c*x,1e5)<=0}function x(t,a,e,r,n,i){return t.some((function(t,o){return a!==o&&t.getControlSegments().some((function(t){return function(t,a,e,r,n,i,o,s){return!!c(t,a,e,r,n,i,o,i)||(!!c(t,a,e,r,o,i,o,s)||(!!c(t,a,e,r,n,s,o,s)||!!c(t,a,e,r,n,i,n,s)))}(t[0],t[1],t[2],t[3],e,r,n,i)}))}))}function d(t,a,e,r,n,i){return t.some((function(t,o){return a!==o&&t.getControlSegments().some((function(t){return c(t[0],t[1],t[2],t[3],e,r,n,i)}))}))}function M(t,a,e,r,n,i,o){var s=Math.floor(.5*o.length),h=s/o.length,u=t+(e-t)*h,f=a+(r-a)*h,k=e+(n-e)*h,y=r+(i-r)*h,c=u+(k-u)*h,x=f+(y-f)*h;return{index:s,off:[[t,a,u,f,c,x],[c,x,k,y,n,i]]}}function p(t,a,e){var r=t[0],n=r[0],i=r[1],s=t[t.length-1],h=s[0],u=s[1],k=f((function(a){return t.reduce((function(e,r,i){var s=i/t.length,u=o(n,a,h,s);return e+Math.pow(r[0]-u,2)}),0)}),a-8,a+8),y=f((function(a){return t.reduce((function(e,r,n){var s=n/t.length,h=o(i,a,u,s);return e+Math.pow(r[1]-h,2)}),0)}),e-8,e+8);return[n,i,k,y,h,u]}function l(t,a,e,r,n,f,k,y,c,x,d){void 0===d&&(d=i);var M,p,l,v,g={left:[],right:[]};e===n&&r===f?(M=function(a){return o(t,e,k,a)},p=function(t){return o(a,r,y,t)},l=function(a){return s(t,e,k,a)},v=function(t){return s(a,r,y,t)}):(M=function(a){return h(t,e,n,k,a)},p=function(t){return h(a,r,f,y,t)},l=function(a){return u(t,e,n,k,a)},v=function(t){return u(a,r,f,y,t)});for(var j=0;j<=1e3;j+=c){var m=j/1e3,W=M(m),A=p(m),Y=l(m),w=d([-v(m),Y],x(m)),b=w[0],_=w[1];g.left.push([W-b,A-_]),g.right.push([W+b,A+_])}return g}var v=function(){function t(t){var a=this;if(this._array=[],t)if("number"==typeof t)for(var e=0;e<t;e++)this.push(0,0,!1);else t.forEach((function(t){var e=t.x,r=t.y,n=t.off;a.push(e,r,n)}))}return Object.defineProperty(t.prototype,"array",{get:function(){var t=this;return this._array.map((function(a,e){return t.get(e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._array.length},enumerable:!1,configurable:!0}),t.prototype.push=function(t,a,e){void 0===e&&(e=!1),this._array.push({x:t,y:a,off:e})},t.prototype.set=function(t,a,e,r){void 0===r&&(r=!1),this._array[t].x=a,this._array[t].y=e,this._array[t].off=r},t.prototype.get=function(t){var a=this._array[t],e=a.x,r=a.y,n=a.off;return{x:Math.floor(10*e)/10,y:Math.floor(10*r)/10,off:n}},t.prototype.reverse=function(){this._array.reverse()},t.prototype.concat=function(t){this._array=this._array.concat(t._array)},t.prototype.shift=function(){this._array.shift()},t.prototype.unshift=function(t,a,e){void 0===e&&(e=!1),this._array.unshift({x:t,y:a,off:e})},t.prototype.clone=function(){var a=new t;return this._array.forEach((function(t){var e=t.x,r=t.y,n=t.off;a.push(e,r,n)})),a},t.prototype.translate=function(t,a){return this._array.forEach((function(e){e.x+=t,e.y+=a})),this},t.prototype.transformMatrix=function(t,a,e,r){return this._array.forEach((function(n){var i=n.x,o=n.y;n.x=t*i+a*o,n.y=e*i+r*o})),this},t.prototype.transformMatrix2=function(t,a){return this.transformMatrix(t,-a,a,t)},t.prototype.scale=function(t){return this._array.forEach((function(a){a.x*=t,a.y*=t})),this},t.prototype.reflectX=function(){return this._array.forEach((function(t){t.x*=-1})),this},t.prototype.reflectY=function(){return this._array.forEach((function(t){t.y*=-1})),this},t.prototype.rotate90=function(){return this._array.forEach((function(t){var a=t.x,e=t.y;t.x=-e,t.y=a})),this},t.prototype.rotate180=function(){return this.scale(-1)},t.prototype.rotate270=function(){return this._array.forEach((function(t){var a=t.x,e=t.y;t.x=e,t.y=-a})),this},t.prototype.floor=function(){return this._array.forEach((function(t){var a=t.x,e=t.y;t.x=Math.floor(a),t.y=Math.floor(e)})),this},t}();function g(t,a,e,r,o,s,h,u,f,y,c,x,d,g,j,m){var W,A=c,Y=x,w=t.kMinWidthT-d/2,b=t.kMinWidthT-m/2;switch(A%100){case 0:case 7:W=-1*t.kMinWidthY*.5;break;case 1:case 2:case 6:case 22:case 32:W=0;break;case 12:W=t.kMinWidthY;break;default:return}var _=e===o&&r===s?[0,W]:i([e-o,r-s],W);switch(e+=_[0],r+=_[1],Y%100){case 0:case 1:case 7:case 9:case 15:case 14:case 17:case 5:W=0;break;case 8:W=-1*w*.5}var S=h===f&&u===y?[0,-W]:i([f-h,y-u],W);f+=S[0],y+=S[1];var E=o===h&&s===u;if(E&&t.kUseCurve){var K=l(e,r,o,s,o,s,f,y,10,(function(t){var a=7===A&&0===Y?1.1*Math.pow(t,.5):7===A?Math.pow(t,.5):7===Y?Math.pow(1-t,.5):j>0?1-j/2/(w-m/2)+j/2/(w-m)*t:1;return a<.15&&(a=.15),w*a}),(function(t,a){var e=t[0],r=t[1];return 0===r?[-a,0]:i([e,r],a)})),U=K.left,L=K.right,R=M(e,r,o,s,f,y,U),T=R.off,X=T[0],C=T[1],P=R.index,F=U.slice(0,P+1),B=U.slice(P),G=M(e,r,o,s,f,y,L),O=G.off,D=O[0],N=O[1],z=G.index,Q=p(F,X[2],X[3]),H=p(B,C[2],C[3]),I=new v([{x:Q[0],y:Q[1]},{x:Q[2],y:Q[3],off:!0},{x:Q[4],y:Q[5]},{x:H[2],y:H[3],off:!0},{x:H[4],y:H[5]}]);(J=new v([{x:L[0][0],y:L[0][1]},{x:D[2]-(Q[2]-X[2]),y:X[3]-(Q[3]-X[3]),off:!0},{x:L[z][0],y:L[z][1]},{x:N[2]-(H[2]-C[2]),y:C[3]-(H[3]-C[3]),off:!0},{x:L[L.length-1][0],y:L[L.length-1][1]}])).reverse(),I.concat(J),a.push(I)}else{var q=.5;n(f-e,y-r)<50&&(q+=.4*(1-n(f-e,y-r)/50));for(var V=l(e,r,o,s,h,u,f,y,t.kRate,(function(a){var e;return(e=E?7===A&&0===Y?Math.pow(a,q)*t.kL2RDfatten:7===A?Math.pow(a,q):7===Y?Math.pow(1-a,q):j>0||m>0?(t.kMinWidthT-j/2-(m-j)/2*a)/t.kMinWidthT:1:7===A&&0===Y?Math.pow(a,q)*t.kL2RDfatten:7===A?Math.pow(Math.pow(a,q),.7):7===Y?Math.pow(1-a,q):1)<.15&&(e=.15),w*e}),(function(t,a){var e=t[0],r=t[1];return 0===k(e)&&0===k(r)?[-a,0]:i([e,r],a)})),Z=V.left,$=V.right,I=new v,J=new v,tt=0,at=Z;tt<at.length;tt++){var et=at[tt],rt=et[0],nt=et[1];I.push(rt,nt)}for(var it=0,ot=$;it<ot.length;it++){var st=ot[it];rt=st[0],nt=st[1];J.push(rt,nt)}if(132===A||22===A&&(E?r>y:e>o))for(var ht=0,ut=J.length;ht+1<ut;ht++){var ft=J.get(ht),kt=J.get(ht+1);if(ft.y<=r&&r<=kt.y){for(var yt=kt.x+(ft.x-kt.x)*(r-kt.y)/(ft.y-kt.y),ct=r,xt=I.get(0),dt=I.get(1),Mt=132===A?xt.x+(dt.x-xt.x)*(r-xt.y)/(dt.y-xt.y):xt.x+(dt.x-xt.x+1)*(r-xt.y)/(dt.y-xt.y),pt=132===A?r:r+1,lt=0;lt<ht;lt++)J.shift();J.set(0,yt,ct),I.unshift(Mt,pt);break}}J.reverse(),I.concat(J),a.push(I)}if(12===A){var vt=e===f?[1,0]:o===e?[s<r?1:-1,0]:i([s-r,-(o-e)]),gt=vt[0],jt=vt[1],I=new v([{x:-w,y:0},{x:+w,y:0},{x:-w,y:-w}]).transformMatrix2(gt,jt).translate(e,r);a.push(I)}if(0===A)if(r<=y){var mt=Math.atan2(Math.abs(r-s),Math.abs(e-o))/Math.PI*2-.4,Wt=(mt*=mt>0?2:16)<0?-1:1,At=mt<0?-mt*t.kMinWidthY:0,Yt=e===o?[1,0]:i([s-r,-(o-e)]),wt=Yt[0],bt=Yt[1];I=new v([{x:-w,y:1},{x:+w,y:0},{x:-w*Wt,y:-t.kMinWidthY*mt*Wt}]).transformMatrix2(wt,bt).translate(e,r);a.push(I),(J=new v).push(w,-At),e===o&&r===s?(J.push(1.5*w,t.kMinWidthY-At),J.push(w-2,2*t.kMinWidthY+1)):(J.push(1.5*w,t.kMinWidthY-1.2*At),J.push(w-2,2*t.kMinWidthY-.8*At+1)),J.transformMatrix2(wt,bt).translate(e,r),a.push(J)}else{var _t=e===o?[1,0]:i([s-r,-(o-e)]);wt=_t[0],bt=_t[1];(I=new v([{x:-w,y:0},{x:+w,y:0},{x:+w,y:-t.kMinWidthY}])).transformMatrix2(wt,bt).translate(e,r),a.push(I),(J=new v([{x:-w,y:0},{x:1.5*-w,y:+t.kMinWidthY},{x:.5*-w,y:3*+t.kMinWidthY}])).transformMatrix2(wt,bt).translate(e,r),a.push(J)}22===A&&((I=new v([{x:-w,y:-t.kMinWidthY},{x:0,y:-t.kMinWidthY-t.kWidth},{x:+w+t.kWidth,y:+t.kMinWidthY},{x:+w,y:+w-1},{x:-w,y:+w+4}])).translate(e,r),a.push(I));if(1===Y||8===Y||15===Y){var St=h===f?[0,1]:u===y?[1,0]:i([f-h,y-u]);gt=St[0],jt=St[1],I=new v(t.kUseCurve?[{x:0,y:-b},{x:.9*+b,y:.9*-b,off:!0},{x:+b,y:0},{x:.9*+b,y:.9*+b,off:!0},{x:0,y:+b}]:[{x:0,y:-b},{x:.7*+b,y:.7*-b},{x:+b,y:0},{x:.7*+b,y:.7*+b},{x:0,y:+b}]);h===f&&I.reverse(),I.transformMatrix2(gt,jt).translate(f,y),a.push(I)}if(9===Y||7===A&&0===Y){var Et=Math.atan2(Math.abs(y-u),Math.abs(f-h))/Math.PI*2-.6,Kt=(Et*=Et>0?8:3)<0?-1:1,Ut=u===y?[0,1]:h===f?[y>u?1:-1,0]:i([-(y-u),f-h],1);gt=Ut[0],jt=Ut[1];(I=new v([{x:+w*t.kL2RDfatten,y:0},{x:-w*t.kL2RDfatten,y:0},{x:+Kt*w*t.kL2RDfatten,y:-Math.abs(Et)*w*t.kL2RDfatten}])).transformMatrix2(gt,jt).translate(f,y),a.push(I)}if(15===Y){I=new v([{x:0,y:1-w},{x:2,y:-w-5*t.kWidth},{x:0,y:-w-5*t.kWidth},{x:-w,y:1-w}]);r>=y&&I.rotate180(),I.translate(f,y),a.push(I)}14===Y&&((I=new v([{x:0,y:0},{x:0,y:-w},{x:4*-t.kWidth*Math.min(1-g/10,Math.pow(w/t.kMinWidthT,3)),y:-w},{x:4*-t.kWidth*Math.min(1-g/10,Math.pow(w/t.kMinWidthT,3)),y:.5*-w}])).translate(f,y),a.push(I))}function j(t,a,e,r,n,i,o,s,h,u,f,k,y,c,x,d){g(t,a,e,r,n,i,o,s,h,u,f,k,y,c,x,d)}function m(t,a,e,r,n,i,o,s,h,u,f,k,y,c){g(t,a,e,r,n,i,n,i,o,s,h,u,f,k,y,c)}function W(t,a,e,r,n,o,s,h,u,f,k,y){var c=e,x=r,d=n,M=o,p=s,l=h,g=t.kMinWidthT-u/2;if(c===d||x!==M&&(c>d||Math.abs(M-x)>=Math.abs(d-c)||6===p||6===l)){var j=c===d?[0,1]:i([d-c,M-x]),m=j[0],W=j[1];if(13!==l&&23!==l||0===y){var A=new v(4);switch(p){case 0:A.set(0,c+W*g+m*t.kMinWidthY/2,x-m*g+W*t.kMinWidthY/2),A.set(3,c-W*g-m*t.kMinWidthY/2,x+m*g-W*t.kMinWidthY/2);break;case 1:case 6:A.set(0,c+W*g,x-m*g),A.set(3,c-W*g,x+m*g);break;case 12:A.set(0,c+W*g-m*t.kMinWidthY,x-m*g-W*t.kMinWidthY),A.set(3,c-W*g-m*(g+t.kMinWidthY),x+m*g-W*(g+t.kMinWidthY));break;case 22:if(c===d)A.set(0,c+g,x),A.set(3,c-g,x);else{var Y=Math.atan((M-x)/(d-c)),w=c>d?-1:1;A.set(0,c+(g*w+1)/Math.sin(Y),x+1),A.set(3,c-g*w/Math.sin(Y),x)}break;case 32:c===d?(A.set(0,c+g,x-t.kMinWidthY),A.set(3,c-g,x-t.kMinWidthY)):(A.set(0,c+g/W,x),A.set(3,c-g/W,x))}switch(l){case 0:6===p?(A.set(1,d+W*g,M-m*g),A.set(2,d-W*g,M+m*g)):(A.set(1,d+W*g-m*g/2,M-m*g-W*g/2),A.set(2,d-W*g+m*g/2,M+m*g+W*g/2));break;case 5:if(c===d)break;case 1:A.set(1,d+W*g,M-m*g),A.set(2,d-W*g,M+m*g);break;case 13:A.set(1,d+W*g+m*t.kAdjustKakatoL[k],M-m*g+W*t.kAdjustKakatoL[k]),A.set(2,d-W*g+m*(t.kAdjustKakatoL[k]+g),M+m*g+W*(t.kAdjustKakatoL[k]+g));break;case 23:A.set(1,d+W*g+m*t.kAdjustKakatoR[k],M-m*g+W*t.kAdjustKakatoR[k]),A.set(2,d-W*g+m*(t.kAdjustKakatoR[k]+g),M+m*g+W*(t.kAdjustKakatoR[k]+g));break;case 24:case 32:c===d?(A.set(1,d+g,M+t.kMinWidthY),A.set(2,d-g,M+t.kMinWidthY)):(A.set(1,d+g/W,M),A.set(2,d-g/W,M))}a.push(A)}if(24===l)(A=new v([{x:0,y:+t.kMinWidthY},c===d?{x:+g,y:3*-t.kMinWidthY}:{x:.5*+g,y:4*-t.kMinWidthY},{x:2*+g,y:-t.kMinWidthY},{x:2*+g,y:+t.kMinWidthY}])).translate(d,M),a.push(A);if(13===l&&4===k&&0===y)if(c===d){(A=new v([{x:-g,y:3*-t.kMinWidthY},{x:2*-g,y:0},{x:-t.kMinWidthY,y:5*+t.kMinWidthY},{x:+g,y:+t.kMinWidthY}])).translate(d,M),a.push(A)}else{var b=c>d&&x!==M?Math.floor((c-d)/(M-x)*3):0;(A=new v([{x:0,y:5*-t.kMinWidthY},{x:2*-g,y:0},{x:-t.kMinWidthY,y:5*+t.kMinWidthY},{x:+g,y:+t.kMinWidthY},{x:0,y:0}])).translate(d+b,M),a.push(A)}if(22===p)(A=new v).push(-g,-t.kMinWidthY),A.push(0,-t.kMinWidthY-t.kWidth),A.push(+g+t.kWidth,+t.kMinWidthY),c===d?(A.push(+g,+g),A.push(-g,0)):(A.push(+g,+g-1),A.push(-g,+g+4)),A.translate(c,x),a.push(A);if(0===p)(A=new v([{x:+g*W+.5*t.kMinWidthY*m,y:+g*-m+.5*t.kMinWidthY*W},{x:+(g+.5*g)*W+(.5*t.kMinWidthY+t.kMinWidthY)*m,y:+(g+.5*g)*-m+(.5*t.kMinWidthY+t.kMinWidthY)*W},c===d?{x:+(g-2)*W+(.5*t.kMinWidthY+2*t.kMinWidthY+1)*m,y:+(g-2)*-m+(.5*t.kMinWidthY+2*t.kMinWidthY+1)*W}:{x:+(g-2)*W+(.5*t.kMinWidthY+2*t.kMinWidthY)*m,y:+(g+1)*-m+(.5*t.kMinWidthY+2*t.kMinWidthY)*W}])).translate(c,x),a.push(A);if(c===d&&1===l||6===p&&(0===l||c!==d&&5===l)){A=new v;if(t.kUseCurve)A.push(-W*-g,+m*-g),A.push(-m*g*.9+-W*-g*.9,+W*g*.9+m*-g*.9,!0),A.push(+m*g,+W*g),A.push(+m*g*.9+-W*g*.9,+W*g*.9+m*g*.9,!0),A.push(-W*g,+m*g);else{var _=c===d&&(6===p&&0===l||1===l)?.6:.8;A.push(0,-g),A.push(+g*_,.6*-g),A.push(+g,0),A.push(+g*_,.6*+g),A.push(0,+g),A.transformMatrix2(m,W)}c===d&&(6===p&&0===l||1===l)&&A.reverse(),A.translate(d,M),a.push(A)}if(c!==d&&6===p&&5===l){var S=c<d?1:-1;(A=new v([{x:0,y:+S*(1-g)},{x:2,y:+S*(-g-5*t.kWidth)},{x:0,y:+S*(-g-5*t.kWidth)},{x:-g,y:1-g}])).transformMatrix2(m,W).translate(d,M),a.push(A)}}else if(x===M&&6===p){var E=new v([{x:c,y:x-g},{x:d,y:M-g},{x:d,y:M+g},{x:c,y:x+g}]);if(a.push(E),1===l||0===l||5===l){var K=c<d?[1,0]:[-1,0];m=K[0],W=K[1],_=.6,A=new v(t.kUseCurve?[{x:0,y:-g},{x:.9*+g,y:.9*-g,off:!0},{x:+g,y:0},{x:.9*+g,y:.9*+g,off:!0},{x:0,y:+g}]:[{x:0,y:-g},{x:+g*_,y:.6*-g},{x:+g,y:0},{x:+g*_,y:.6*+g},{x:0,y:+g}]);c>=d&&A.reverse(),A.transformMatrix2(m,W).translate(d,M),a.push(A)}if(5===l){A=new v([{x:0,y:-g},{x:2,y:-g-t.kWidth*(4*(1-u/t.kAdjustMageStep)+1)},{x:0,y:-g-t.kWidth*(4*(1-u/t.kAdjustMageStep)+1)},{x:-g,y:-g}]);c>=d&&A.reflectX(),A.translate(d,M),a.push(A)}}else{var U=x===M?[1,0]:i([d-c,M-x]);m=U[0],W=U[1],A=new v([{x:c+W*t.kMinWidthY,y:x-m*t.kMinWidthY},{x:d+W*t.kMinWidthY,y:M-m*t.kMinWidthY},{x:d-W*t.kMinWidthY,y:M+m*t.kMinWidthY},{x:c-W*t.kMinWidthY,y:x+m*t.kMinWidthY}]);if(a.push(A),0===l&&0===y){var L=new v([{x:+W*t.kMinWidthY,y:-m*t.kMinWidthY},{x:-m*t.kAdjustUrokoX[f],y:-W*t.kAdjustUrokoX[f]},{x:-(m-W)*t.kAdjustUrokoX[f]/2,y:-(W+m)*t.kAdjustUrokoY[f]}]);L.translate(d,M),a.push(L)}}}var A=function(){function t(){this.shotai=E.kMincho,this.kRate=100,this.setSize()}return t.prototype.draw=function(t,a){!function(t,a,e){var r=e.a1,o=e.x1,s=e.y1,h=e.x2,u=e.y2,f=e.x3,k=e.y3,y=e.x4,c=e.y4,x=e.a2_100,d=e.kirikuchiAdjustment,M=e.tateAdjustment,p=e.opt3,l=e.a3_100,v=e.haneAdjustment,g=e.urokoAdjustment,A=e.kakatoAdjustment,Y=e.mageAdjustment;switch(r%100){case 0:if(98===x&&0===d&&0===M&&0===p)for(var w=0,b=a.array;w<b.length;w++){if((P=b[w]).array.every((function(t){var a=t.x,e=t.y;return o<=a&&a<=h&&s<=e&&e<=u}))){var _=o+h,S=0;P.scale(10).floor().reflectX().translate(10*_,10*S).scale(.1)}}else if(97===x&&0===d&&0===M&&0===p)for(var E=0,K=a.array;E<K.length;E++){if((P=K[E]).array.every((function(t){var a=t.x,e=t.y;return o<=a&&a<=h&&s<=e&&e<=u}))){_=0,S=s+u;P.scale(10).floor().reflectY().translate(10*_,10*S).scale(.1)}}else if(99===x&&0===d&&0===M&&0===p&&1===l&&0===v&&0===Y)for(var U=0,L=a.array;U<L.length;U++){if((P=L[U]).array.every((function(t){var a=t.x,e=t.y;return o<=a&&a<=h&&s<=e&&e<=u}))){_=o+u,S=s-o;P.scale(10).floor().rotate90().translate(10*_,10*S).scale(.1)}}else if(99===x&&0===d&&0===M&&0===p&&2===l&&0===v&&0===Y)for(var R=0,T=a.array;R<T.length;R++){if((P=T[R]).array.every((function(t){var a=t.x,e=t.y;return o<=a&&a<=h&&s<=e&&e<=u}))){_=o+h,S=s+u;P.scale(10).floor().rotate180().translate(10*_,10*S).scale(.1)}}else if(99===x&&0===d&&0===M&&0===p&&3===l&&0===v&&0===Y)for(var X=0,C=a.array;X<C.length;X++){var P;if((P=C[X]).array.every((function(t){var a=t.x,e=t.y;return o<=a&&a<=h&&s<=e&&e<=u}))){_=o-s,S=u+o;P.scale(10).floor().rotate270().translate(10*_,10*S).scale(.1)}}break;case 1:if(4===l){var F=o===h&&s===u?[0,t.kMage]:i([o-h,s-u],t.kMage),B=F[0],G=F[1];W(t,a,o,s,N=h+B,z=u+G,x+100*d,1,M+10*p,0,0,0),m(t,a,N,z,h,u,h-t.kMage*((t.kAdjustTateStep+4-M-10*p)/(t.kAdjustTateStep+4)),u,1,14,M,v,p,Y)}else W(t,a,o,s,h,u,x+100*d,l,M+10*p,g,A,Y);break;case 2:if(4===l){var O=h===f?[0,-t.kMage]:u===k?[-t.kMage,0]:i([h-f,u-k],t.kMage);B=O[0],G=O[1];m(t,a,o,s,h,u,N=f+B,z=k+G,x+100*d,1,M,0,p,0),m(t,a,N,z,f,k,f-t.kMage,k,1,14,0,v,0,Y)}else m(t,a,o,s,h,u,f,k,x+100*d,5===l&&0===v&&0===Y?15:l,M,v,p,Y);break;case 3:var D=o===h&&s===u?[0,t.kMage]:i([o-h,s-u],t.kMage),N=(B=D[0],G=D[1],h+B),z=u+G,Q=h===f&&u===k?[0,-t.kMage]:i([f-h,k-u],t.kMage),H=Q[0],I=Q[1],q=h+H,V=u+I;W(t,a,o,s,N,z,x+100*d,1,M+10*p,0,0,0),m(t,a,N,z,h,u,q,V,1,1,0,0,M+10*p,Y),(5!==l||0!==v||(h<f&&f-q>0||h>f&&q-f>0))&&W(t,a,q,V,f,k,6,l,Y,g,A,5===l&&0===v?0:Y);break;case 12:m(t,a,o,s,h,u,f,k,x+100*d,1,M,0,p,0),W(t,a,f,k,y,c,6,l,0,g,A,Y);break;case 4:var Z=n(f-h,k-u)/120*6;Z>6&&(Z=6);var $=o===h&&s===u?[0,t.kMage*Z]:i([o-h,s-u],t.kMage*Z),J=(B=$[0],G=$[1],N=h+B,z=u+G,h===f&&u===k?[0,-t.kMage*Z]:i([f-h,k-u],t.kMage*Z));H=J[0],I=J[1],q=h+H,V=u+I;W(t,a,o,s,N,z,x+100*d,1,M+10*p,0,0,0),m(t,a,N,z,h,u,q,V,1,1,0,0,0,0),5===l&&0===v&&0===Y&&f-q<=0||W(t,a,q,V,f,k,6,l,0,g,A,Y);break;case 6:if(4===l){var tt=f===y?[0,-t.kMage]:k===c?[-t.kMage,0]:i([f-y,k-c],t.kMage);B=tt[0],G=tt[1];j(t,a,o,s,h,u,f,k,N=y+B,z=c+G,x+100*d,1,M,0,p,0),m(t,a,N,z,y,c,y-t.kMage,c,1,14,0,v,0,Y)}else j(t,a,o,s,h,u,f,k,y,c,x+100*d,5===l&&0===v&&0===Y?15:l,M,v,p,Y);break;case 7:W(t,a,o,s,h,u,x+100*d,1,M+10*p,0,0,0),m(t,a,h,u,f,k,y,c,1,l,M,v,p,Y)}}(this,t,a)},t.prototype.setSize=function(t){1===t?(this.kMinWidthY=1.2,this.kMinWidthT=3.6,this.kWidth=3,this.kKakato=1.8,this.kL2RDfatten=1.1,this.kMage=6,this.kUseCurve=!1,this.kAdjustKakatoL=[8,5,3,1,0],this.kAdjustKakatoR=[4,3,2,1],this.kAdjustKakatoRangeX=12,this.kAdjustKakatoRangeY=[1,11,14,18],this.kAdjustKakatoStep=3,this.kAdjustUrokoX=[14,12,9,7],this.kAdjustUrokoY=[7,6,5,4],this.kAdjustUrokoLength=[13,21,30],this.kAdjustUrokoLengthStep=3,this.kAdjustUrokoLine=[13,15,18]):(this.kMinWidthY=2,this.kMinWidthT=6,this.kWidth=5,this.kKakato=3,this.kL2RDfatten=1.1,this.kMage=10,this.kUseCurve=!1,this.kAdjustKakatoL=[14,9,5,2,0],this.kAdjustKakatoR=[8,6,4,2],this.kAdjustKakatoRangeX=20,this.kAdjustKakatoRangeY=[1,19,24,30],this.kAdjustKakatoStep=3,this.kAdjustUrokoX=[24,20,16,12],this.kAdjustUrokoY=[12,11,9,8],this.kAdjustUrokoLength=[22,36,50],this.kAdjustUrokoLengthStep=3,this.kAdjustUrokoLine=[22,26,30],this.kAdjustUroko2Step=3,this.kAdjustUroko2Length=40,this.kAdjustTateStep=4,this.kAdjustMageStep=5)},t.prototype.adjustStrokes=function(t){return this.adjustHane(t),this.adjustMage(t),this.adjustTate(t),this.adjustKakato(t),this.adjustUroko(t),this.adjustUroko2(t),this.adjustKirikuchi(t),t},t.prototype.adjustHane=function(t){return t.forEach((function(a,e){if((1===a.a1||2===a.a1||6===a.a1)&&4===a.a3_100&&0===a.haneAdjustment&&0===a.mageAdjustment){var r,n;1===a.a1?(r=a.x2,n=a.y2):2===a.a1?(r=a.x3,n=a.y3):(r=a.x4,n=a.y4);var i=1/0;r+18<100&&(i=r+18),t.forEach((function(t,a){e!==a&&1===t.a1&&t.x1===t.x2&&t.x1<r&&t.y1<=n&&t.y2>=n&&r-t.x1<100&&(i=Math.min(i,r-t.x1))})),i!==1/0&&(a.haneAdjustment+=7-Math.floor(i/15))}})),t},t.prototype.adjustMage=function(t){var a=this;return t.forEach((function(e,r){3===e.a1&&e.y2===e.y3&&t.forEach((function(t,n){r!==n&&(1===t.a1&&t.y1===t.y2&&!(e.x2+1>t.x2||e.x3-1<t.x1)&&k(Math.abs(e.y2-t.y1))<a.kMinWidthT*a.kAdjustMageStep||3===t.a1&&t.y2===t.y3&&!(e.x2+1>t.x3||e.x3-1<t.x2)&&k(Math.abs(e.y2-t.y2))<a.kMinWidthT*a.kAdjustMageStep)&&(e.mageAdjustment+=a.kAdjustMageStep-Math.floor(Math.abs(e.y2-t.y2)/a.kMinWidthT),e.mageAdjustment>a.kAdjustMageStep&&(e.mageAdjustment=a.kAdjustMageStep))}))})),t},t.prototype.adjustTate=function(t){var a=this;return t.forEach((function(e,r){1!==e.a1&&3!==e.a1&&7!==e.a1||e.x1!==e.x2||t.forEach((function(t,n){r!==n&&(1===t.a1||3===t.a1||7===t.a1)&&t.x1===t.x2&&!(e.y1+1>t.y2||e.y2-1<t.y1)&&k(Math.abs(e.x1-t.x1))<a.kMinWidthT*a.kAdjustTateStep&&(e.tateAdjustment+=a.kAdjustTateStep-Math.floor(Math.abs(e.x1-t.x1)/a.kMinWidthT),e.tateAdjustment>a.kAdjustTateStep&&(e.tateAdjustment=a.kAdjustTateStep))}))})),t},t.prototype.adjustKakato=function(t){var a=this;return t.forEach((function(e,r){if(1===e.a1&&(13===e.a3_100||23===e.a3_100)&&0===e.kakatoAdjustment&&0===e.mageAdjustment)for(var n=0;n<a.kAdjustKakatoStep;n++)if(x(t,r,e.x2-a.kAdjustKakatoRangeX/2,e.y2+a.kAdjustKakatoRangeY[n],e.x2+a.kAdjustKakatoRangeX/2,e.y2+a.kAdjustKakatoRangeY[n+1])||k(e.y2+a.kAdjustKakatoRangeY[n+1])>200||k(e.y2-e.y1)<a.kAdjustKakatoRangeY[n+1]){e.kakatoAdjustment=3-n;break}})),t},t.prototype.adjustUroko=function(t){var a=this;return t.forEach((function(e,r){if(1===e.a1&&0===e.a3_100&&0===e.urokoAdjustment&&0===e.mageAdjustment)for(var o=0;o<a.kAdjustUrokoLengthStep;o++){var s=void 0,h=void 0,u=void 0;if(e.y1===e.y2)s=e.x2-a.kAdjustUrokoLine[o],h=e.y2-.5,u=e.x2-e.x1;else{var f=e.x1===e.x2?[0,(e.y2-e.y1)/(e.x2-e.x1)>0?1:-1]:e.x2-e.x1<0?i([e.x1-e.x2,e.y1-e.y2]):i([e.x2-e.x1,e.y2-e.y1]),y=f[0],c=f[1];s=e.x2-a.kAdjustUrokoLine[o]*y-.5*c,h=e.y2-a.kAdjustUrokoLine[o]*c-.5*y,u=n(e.y2-e.y1,e.x2-e.x1)}if(k(u)<a.kAdjustUrokoLength[o]||d(t,r,s,h,e.x2,e.y2)){e.urokoAdjustment=a.kAdjustUrokoLengthStep-o;break}}})),t},t.prototype.adjustUroko2=function(t){var a=this;return t.forEach((function(e,r){if(1===e.a1&&0===e.a3_100&&0===e.urokoAdjustment&&0===e.mageAdjustment&&e.y1===e.y2){var n=0;t.forEach((function(t,i){r!==i&&(1===t.a1&&t.y1===t.y2&&!(e.x1+1>t.x2||e.x2-1<t.x1)&&k(Math.abs(e.y1-t.y1))<a.kAdjustUroko2Length||3===t.a1&&t.y2===t.y3&&!(e.x1+1>t.x3||e.x2-1<t.x2)&&k(Math.abs(e.y1-t.y2))<a.kAdjustUroko2Length)&&(n+=Math.pow(a.kAdjustUroko2Length-Math.abs(e.y1-t.y2),1.1))})),e.urokoAdjustment=Math.min(Math.floor(n/a.kAdjustUroko2Length),a.kAdjustUroko2Step)}})),t},t.prototype.adjustKirikuchi=function(t){return t.forEach((function(a){if(2===a.a1&&32===a.a2_100&&0===a.kirikuchiAdjustment&&0===a.tateAdjustment&&0===a.opt3&&a.x1>a.x2&&a.y1<a.y2)for(var e=0,r=t;e<r.length;e++){var n=r[e];if(1===n.a1&&n.x1<a.x1&&n.x2>a.x1&&n.y1===a.y1&&n.y1===n.y2){a.kirikuchiAdjustment=1;break}}})),t},t}(),Y=function(t,a){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)a.hasOwnProperty(e)&&(t[e]=a[e])})(t,a)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function w(t,a,e,r,n,o,s,h,u,f,y,c){var x=y,d=c;if(x%10==2){var M=e===n&&r===o?[0,t.kWidth]:i([e-n,r-o],t.kWidth);e+=M[0],r+=M[1]}else if(x%10==3){var p=e===n&&r===o?[0,t.kWidth*t.kKakato]:i([e-n,r-o],t.kWidth*t.kKakato);e+=p[0],r+=p[1]}if(d%10==2){var g=s===u&&h===f?[0,-t.kWidth]:i([u-s,f-h],t.kWidth);u+=g[0],f+=g[1]}else if(d%10==3){var j=s===u&&h===f?[0,-t.kWidth*t.kKakato]:i([u-s,f-h],t.kWidth*t.kKakato);u+=j[0],f+=j[1]}for(var m=l(e,r,n,o,s,h,u,f,t.kRate,(function(){return t.kWidth}),(function(t,a){var e=t[0],r=t[1];return 0===k(e)&&0===k(r)?[-a,0]:i([e,r],a)})),W=m.left,A=m.right,Y=new v,w=new v,b=0,_=W;b<_.length;b++){var S=_[b],E=S[0],K=S[1];Y.push(E,K)}for(var U=0,L=A;U<L.length;U++){var R=L[U];E=R[0],K=R[1];w.push(E,K)}w.reverse(),Y.concat(w),a.push(Y)}function b(t,a,e,r,n,i,o,s,h,u,f,k){w(t,a,e,r,n,i,o,s,h,u,f,k)}function _(t,a,e,r,n,i,o,s,h,u){w(t,a,e,r,n,i,n,i,o,s,h,u)}function S(t,a,e,r,n,o,s,h){var u,f,k,y,c,x;e===n&&r>o||e>n?(u=n,f=o,k=e,y=r,c=h,x=s):(u=e,f=r,k=n,y=o,c=s,x=h);var d=u===k&&f===y?[0,t.kWidth]:i([k-u,y-f],t.kWidth),M=d[0],p=d[1];c%10==2?(u-=M,f-=p):c%10==3&&(u-=M*t.kKakato,f-=p*t.kKakato),x%10==2?(k+=M,y+=p):x%10==3&&(k+=M*t.kKakato,y+=p*t.kKakato);var l=new v([{x:u+p,y:f-M},{x:k+p,y:y-M},{x:k-p,y:y+M},{x:u-p,y:f+M}]);e===n&&l.reverse(),a.push(l)}var E,K=function(t){function a(){var a=null!==t&&t.apply(this,arguments)||this;return a.shotai=E.kGothic,a}return function(t,a){function e(){this.constructor=t}Y(t,a),t.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}(a,t),a.prototype.draw=function(t,a){!function(t,a,e){var r=e.a1,n=e.x1,o=e.y1,s=e.x2,h=e.y2,u=e.x3,f=e.y3,k=e.x4,y=e.y4,c=e.a2_100,x=e.a3_100,d=e.haneAdjustment,M=e.mageAdjustment;switch(r%100){case 0:break;case 1:if(4===x&&0===d&&0===M){var p=n===s&&o===h?[0,t.kMage]:i([n-s,o-h],t.kMage);S(t,a,n,o,W=s+p[0],v=h+p[1],c,1),_(t,a,W,v,s,h,s-2*t.kMage,h-.5*t.kMage,1,0)}else S(t,a,n,o,s,h,c,x);break;case 2:case 12:if(4===x&&0===d&&0===M){var l=s===u?[0,-t.kMage]:h===f?[-t.kMage,0]:i([s-u,h-f],t.kMage);_(t,a,n,o,s,h,W=u+l[0],v=f+l[1],c,1),_(t,a,W,v,u,f,u-2*t.kMage,f-.5*t.kMage,1,0)}else if(5===x&&0===d&&0===M){var v=f,g=(W=u+t.kMage)+.5*t.kMage,j=f-2*t.kMage;_(t,a,n,o,s,h,u,f,c,1),_(t,a,u,f,W,v,g,j,1,0)}else _(t,a,n,o,s,h,u,f,c,x);break;case 3:var m=n===s&&o===h?[0,t.kMage]:i([n-s,o-h],t.kMage),W=s+m[0],A=(v=h+m[1],s===u&&h===f?[0,-t.kMage]:i([u-s,f-h],t.kMage));g=s+A[0],j=h+A[1];if(S(t,a,n,o,W,v,c,1),_(t,a,W,v,s,h,g,j,1,1),5===x&&0===d&&0===M){var Y=u-t.kMage,w=f,E=u+.5*t.kMage,K=f-2*t.kMage;S(t,a,g,j,Y,w,1,1),_(t,a,Y,w,u,f,E,K,1,0)}else S(t,a,g,j,u,f,1,x);break;case 6:if(5===x&&0===d&&0===M){W=k-t.kMage,v=y,g=k+.5*t.kMage,j=y-2*t.kMage;b(t,a,n,o,s,h,u,f,W,v,c,1),_(t,a,W,v,k,y,g,j,1,0)}else b(t,a,n,o,s,h,u,f,k,y,c,x);break;case 7:S(t,a,n,o,s,h,c,1),_(t,a,s,h,u,f,k,y,1,x)}}(this,t,a)},a}(A);function U(t){switch(t){case E.kMincho:return new A;default:return new K}}return function(t){t[t.kMincho=0]="kMincho",t[t.kGothic=1]="kGothic"}(E||(E={})),function(){function n(a){this.kMincho=E.kMincho,this.kGothic=E.kGothic,this.kFont=U(E.kMincho),this.stretch=e,this.kFont.setSize(a),this.kBuhin=new t}return Object.defineProperty(n.prototype,"kShotai",{get:function(){return this.kFont.shotai},set:function(t){this.kFont=U(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"kUseCurve",{get:function(){return this.kFont.kUseCurve},set:function(t){this.kFont.kUseCurve=t},enumerable:!1,configurable:!0}),n.prototype.makeGlyph=function(t,a){var e=this.kBuhin.search(a);this.makeGlyph2(t,e)},n.prototype.makeGlyph2=function(t,a){var e=this;if(""!==a){var r=this.getEachStrokes(a);this.kFont.adjustStrokes(r),r.forEach((function(a){e.kFont.draw(t,a)}))}},n.prototype.makeGlyph3=function(t){var e=this,r=[];if(""!==t){var n=this.getEachStrokes(t);this.kFont.adjustStrokes(n),n.forEach((function(t){var n=new a;e.kFont.draw(n,t),r.push(n)}))}return r},n.prototype.makeGlyphSeparated=function(t){var e=this,r=t.map((function(t){return e.getEachStrokes(t)}));this.kFont.adjustStrokes(r.reduce((function(t,a){return t.concat(a)}),[]));var n=new a;return r.map((function(t){var r=n.array.length;t.forEach((function(t){e.kFont.draw(n,t)}));var i=new a;return i.array=n.array.slice(r),i}))},n.prototype.getEachStrokes=function(t){var a=this,e=[];return t.split("$").forEach((function(t){var n=t.split(":");if(99!==Math.floor(+n[0]))e.push(new r([Math.floor(+n[0]),Math.floor(+n[1]),Math.floor(+n[2]),Math.floor(+n[3]),Math.floor(+n[4]),Math.floor(+n[5]),Math.floor(+n[6]),Math.floor(+n[7]),Math.floor(+n[8]),Math.floor(+n[9]),Math.floor(+n[10])]));else{var i=a.kBuhin.search(n[7]);""!==i&&(e=e.concat(a.getEachStrokesOfBuhin(i,Math.floor(+n[3]),Math.floor(+n[4]),Math.floor(+n[5]),Math.floor(+n[6]),Math.floor(+n[1]),Math.floor(+n[2]),Math.floor(+n[9]),Math.floor(+n[10]))))}})),e},n.prototype.getEachStrokesOfBuhin=function(t,a,e,r,n,i,o,s,h){var u=this.getEachStrokes(t),f=this.getBox(u);return 0===i&&0===o||(i>100?i-=200:(s=0,h=0)),u.forEach((function(t){0===i&&0===o||t.stretch(i,s,o,h,f.minX,f.maxX,f.minY,f.maxY),t.x1=a+t.x1*(r-a)/200,t.y1=e+t.y1*(n-e)/200,t.x2=a+t.x2*(r-a)/200,t.y2=e+t.y2*(n-e)/200,t.x3=a+t.x3*(r-a)/200,t.y3=e+t.y3*(n-e)/200,t.x4=a+t.x4*(r-a)/200,t.y4=e+t.y4*(n-e)/200})),u},n.prototype.getBox=function(t){var a=200,e=200,r=0,n=0;return t.forEach((function(t){var i=t.getBox(),o=i.minX,s=i.maxX,h=i.minY,u=i.maxY;a=Math.min(a,o),r=Math.max(r,s),e=Math.min(e,h),n=Math.max(n,u)})),{minX:a,maxX:r,minY:e,maxY:n}},n.Buhin=t,n.Polygons=a,n}()}();
